---
title: å¦‚ä½•æ„å»ºè¿™ä¸ªç«™ç‚¹
date: 2024-02-21
update: 2024-02-22
top: false
tags: test
---
<route lang="yaml">
meta:
  layout: article
</route>

<Mdtitle :title="frontmatter.title" :update="frontmatter.update" />

### ä¸ºä½•å¼€å§‹

&emsp;&emsp;å…ˆå‰çš„ç½‘ç«™ä½¿ç”¨çš„æ˜¯åŸºäºvuepressçš„ä¸€ä¸ªæ‰©å±•çš„åšå®¢å’Œæ–‡æ¡£æ¡†æ¶, [vuepress-theme-reco](https://github.com/vuepress-reco/vuepress-theme-reco-1.x)ã€‚

&emsp;&emsp;æœ€åˆï¼Œæˆ‘ä½¿ç”¨äº†1.xç‰ˆæœ¬ï¼›æ¡†æ¶é›†æˆäº†å¾ˆå¤šåŠŸèƒ½å¹¶å¼€ç®±å³ç”¨ï¼›ä½¿ç”¨ä¸‹æ¥ï¼Œè¿˜è¡Œå§ï¼Œä¸­è§„ä¸­çŸ©çš„æ–‡æ¡£åšå®¢é£æ ¼ã€‚å½“æ—¶è§‰å¾—ï¼Œé…ç½®æœ‰ç‚¹å„¿éº»çƒ¦ï¼Œæ–‡æ¡£å¹¶ä¸å®Œå–„ç»†è‡´ï¼Œæœ‰äº›é—®é¢˜ä¸å¥½å¾—åˆ°è§£å†³ï¼›å›å¿†ä¸€ä¸‹ï¼Œé‚£ä¹Ÿå·²ç»æ˜¯3å¹´å‰äº†ï¼ˆ2019å¹´ï¼‰ï¼Œå¯èƒ½ä½œè€…å¤ªå¿™ï¼Œç»´æŠ¤é¡¹ç›®ç²¾åŠ›æœ‰é™ã€‚å½“æ—¶ï¼Œè€—è´¹äº†ä¸€ç•ªç²¾åŠ›éƒ¨ç½²äº†ç½‘ç«™åï¼Œä¸€ç›´å°‘æœ‰å†å»æŠ˜è…¾ã€‚ç›´åˆ°2023å¹´åº•ã€‚

&emsp;&emsp;2023 Ai chat é£é¡. è‡ªå·±èŠ±äº†2ä¸ªæœˆçš„æ—¶é—´å­¦ä¹ C#è¯­è¨€ï¼Œå†™äº†ä¸€ä¸ªAi èŠå¤©çš„æ··åˆåº”ç”¨ï¼Œæƒ³ç€æŠŠä»–çš„ç›¸å…³ä»‹ç»æ”¾åœ¨ç½‘ç«™ä¸Šé¢ï¼Œå°±å¼€å§‹æŠ˜è…¾è¿™ä¸ªç«™ç‚¹ã€‚æŠ˜è…¾å‰çš„æƒ³æ³•å°±æ˜¯æƒ³è¦æœ‰ä¸€ä¸ªè‡ªç”±åº¦é«˜ï¼Œè‡ªå·±èƒ½æŠŠæ¡å¼€å‘ï¼Œé£æ ¼ç®€å•ï¼Œæ”¯æŒmarkdownæ–‡æ¡£çš„è¿™ä¹ˆä¸€ä¸ªvueåº”ç”¨ã€‚ç»è¿‡ï¼Œä¸€ç•ªæœç´¢åï¼Œçœ‹åˆ°äº†[antfu](https://antfu.me/) çš„ä¸ªäººç«™ç‚¹ã€‚éå¸¸å–œæ¬¢ï¼å°±æ˜¯è¿™æ ·çš„ï¼antfu ä¸ç”¨è¿‡å¤šä»‹ç»å§ï¼Œå‰ç«¯VUEç”Ÿæ€éå¸¸æ´»è·ƒçš„äººæ‰~ ğŸ¤­ äºæ˜¯ï¼Œå¼€å§‹äº†æ„å»ºä¹‹æ—…~

### æŠ€æœ¯æ ˆ

| æ¡†æ¶                                                                             | åŠŸèƒ½                                          |
| :------------------------------------------------------------------------------- | :-------------------------------------------- |
| [bootstrap5](https://getbootstrap.com/)                                             | css ui æ¡†æ¶                                   |
| [vite](https://cn.vitejs.dev/)                                                      | æ„å»ºåº”ç”¨                                      |
| [vue](https://cn.vuejs.org/)                                                        | æ¸è¿›å¼jsæ¡†æ¶                                  |
| [unplugin-vue-markdown](https://github.com/unplugin/unplugin-vue-markdown)          | vueæ”¯æŒmd/mdä¸­æ”¯æŒvue component ; æ”¯æŒmdæ’ä»¶  |
| [vite-plugin-vue-layouts](https://github.com/JohnCampionJr/vite-plugin-vue-layouts) | vue-router çš„å¸ƒå±€æ’ä»¶ï¼Œå¯ä»¥åˆ†ç±»é£æ ¼åŒ–ç®¡ç†å¸ƒå±€ |
| [vite-plugin-pages](https://github.com/hannoeru/vite-plugin-pages)                  | åŸºäºæ–‡ä»¶çš„è·¯ç”±æ’ä»¶ æ”¯æŒmd ï¼ŒåŠ¨æ€è·¯ç”±ç­‰        |
| [unplugin-auto-import](https://github.com/unplugin/unplugin-auto-import)            | è‡ªåŠ¨å¯¼å…¥vueæˆ–å…¶ä»–åº“                           |
| [unplugin-vue-components](https://github.com/unplugin/unplugin-vue-components)      | è‡ªåŠ¨å¯¼å…¥vueç»„ä»¶ æŒ‰éœ€å¼•å…¥                      |

### é¡¹ç›®ç›®å½•

```
â”œâ”€public
â”‚  â”œâ”€css
â”‚  â””â”€image
â””â”€src
    â”œâ”€assets
    â”‚  â”œâ”€css
    â”‚  â””â”€image
    â”œâ”€back
    â”œâ”€components
    â”œâ”€layouts
    â”œâ”€pages
       â”œâ”€ai
       â”œâ”€net
       â”œâ”€posts
       â””â”€webfront
```

componentsï¼š é¡¹ç›®éœ€è¦çš„è‡ªå®šä¹‰vueç»„ä»¶ï¼Œ ç”± unplugin-vue-components/vite è‡ªåŠ¨å¯¼å…¥
layoutsï¼š  è·¯ç”±å¸ƒå±€ï¼Œä¾æ® vite-plugin-vue-layouts é…ç½®
pagesï¼š  æ–‡ç« é¡µé¢æ–‡ä»¶å¤¹ï¼Œåˆ†ç±»ä¿å­˜äº†å„ä¸ªmarkdownæ–‡ä»¶ã€‚mdæ–‡ç« è·¯ç”±ä½¿ç”¨ vite-plugin-pages é…ç½®

### å¼€å§‹é¡¹ç›®

1. æ–°å»ºVite é¡¹ç›®ï¼Œè¿‡ç¨‹ç•¥ï¼Œ-- æ²¡æœ‰ä½¿ç”¨typescript
2. å®‰è£…ä¾èµ–ï¼Œvue,router,ä»¥åŠéœ€è¦çš„viteæ’ä»¶
3. é…ç½®æ’ä»¶ï¼Œvite.config.js åŸºç¡€é…ç½®ï¼Œç•¥  --å„æ’ä»¶éƒ½ä½¿ç”¨äº†é»˜è®¤é…ç½®

#### Main layout

&emsp;&emsp;è¿™é‡Œå›¾ç¤ºäº†æ–‡ç« çš„ä¸»è¦å¸ƒå±€ï¼Œå…¶ä»–é¡µé¢ä¾‹å¦‚é¦–é¡µ/é¡¹ç›®/ç•™è¨€ ç­‰ç­‰ï¼Œå¯ä»¥å•ç‹¬åœ¨å®šåˆ¶.

Md-toc : mdæ–‡æ¡£ç›®å½•
Content : mdæ–‡æ¡£å†…å®¹
Header: é¡µå¤´
Footer: é¡µå°¾

<img src="/public/image/mainlayout.png" width = "50%" class="img-thumbnail" />

#### Router process flow

<img src="/public/image/router-process-logic.png" width = "70%" class="img-thumbnail" />

#### vue.config.js

```js
import { fileURLToPath, URL } from 'node:url'
import path, { resolve } from 'node:path'
import * as fs from 'node:fs'
import matter from 'gray-matter'

import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

// use auto import com...
import AutoImport from 'unplugin-auto-import/vite'
// use auto import user components th...
import Components from 'unplugin-vue-components/vite'

// file route config need's
import VitePages from "vite-plugin-pages";

// https://github.com/JohnCampionJr/vite-plugin-vue-layouts
import Layouts from 'vite-plugin-vue-layouts';

// https://github.com/unplugin/unplugin-vue-markdown
import Markdown from 'unplugin-vue-markdown/vite'
import MarkdownItAnchor from 'markdown-it-anchor'
import MarkdownItPrism from 'markdown-it-prism'
import { full as emoji } from 'markdown-it-emoji'
import { demo } from "@mdit/plugin-demo";
import { attrs } from "@mdit/plugin-attrs"

// 
import MarkdownItCopy from 'markdown-it-copy'

// https://vitejs.dev/config/
export default defineConfig({
  // ssgOptions: {
  //   format: 'cjs',
  // },
  plugins: [
    vue({
      include: [/\.vue$/, /\.md$/]
    }),
    Markdown({
      // headEnabled: true,
      // default options passed to markdown-it
      // see: https://markdown-it.github.io/markdown-it/
      markdownItOptions: {
        breaks: true,
        typographer: true,
      },
      // A function providing the Markdown It instance gets the ability to apply custom settings/plugins
      markdownItSetup(md) {
        // for example
        md.use(MarkdownItAnchor, {
          // permalink: MarkdownItAnchor.permalink[]
          permalink: true,
          permalinkSymbol: '#',
          permalinkBefore: true
        }),
          md.use(attrs),
          md.use(MarkdownItPrism, {
            highlightInlineCode: true,
            plugins: ['copy-to-clipboard']
          }),
          md.use(MarkdownItCopy,),
          md.use(emoji, {
            shortcuts: {
              "sm": [':-)']
            }
          }),
          md.use(demo)
        // md.use(MarkdownItTocDoneRight)
      },
    }),
    AutoImport({
      imports: ['vue', 'vue-router']
    }),
    Components({
      // relative paths to the directory to search for components.
      dirs: ['src/components'],

      // valid file extensions for components.
      extensions: ['vue', 'md'],
      // filters for transforming targets
      include: [/\.vue$/, /\.vue\?vue/, /\.md$/],
    }),
    VitePages({
      extensions: ["vue", "md"],
      pagesDir: "src/pages",
      exclude: ['**/components/*.vue'],
      // add each md's frontmatter to correspondly route's meta
      extendRoute(route) {
        const path = resolve(__dirname, route.component.slice(1))
        const md = fs.readFileSync(path, "utf-8")
        const { data } = matter(md)
        route.meta = Object.assign(route.meta || {}, { frontmatter: data })

        return route
      },
      onRoutesGenerated(routes) {   
        let rBlog = routes.find(r => r.name === 'blog' )
        // unincludes 'blog' route and 'all' route and 'index' route
        let tabs = {}
        // limit which folder can be process
        let tabsFolder = ['posts','ai','webfront','net']
        for (const route of routes.filter(r => !['index', 'all', 'blog'].includes(r.name)))) {
          // build blog's tabs data
          let tab = route.name.slice(0, route.name.indexOf('-'))
          if (!tabs.hasOwnProperty(tab))
              tabs[tab] = []
          if (tabsFolder.includes(tab))
            tabs[tab].push({
              ...route
            })
        }
        rBlog.meta = Object.assign(rBlog.meta || {}, { tabs: tabs })
      },
    }),
    Layouts()
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  build: {
    // get smaller bundle file
    minify: 'terser',
  },
  // use esbuild to drop console command before build proj
  // https://esbuild.github.io/api/#drop
  esbuild:{
    drop: ['console']
  }
})
```

#### main.js

```javascript
import '@/assets/css/main.css'

// import { createApp } from 'vue'
// import { createPinia } from 'pinia'

import App from './App.vue'
// import router from './router'

import { createRouter, createWebHistory } from 'vue-router'
// vite-plugin-pages ç”Ÿæˆçš„è·¯ç”±ä¿¡æ¯
import routes from "pages-generated";

import { setupLayouts } from 'virtual:generated-layouts'

// bootstrap color mod
const theme = localStorage.getItem('theme')
if (theme){
    document.documentElement.setAttribute('data-bs-theme', theme)
} else {
    localStorage.setItem('theme', 'light')
    document.documentElement.setAttribute('data-bs-theme', 'light')
}

const layoutRoutes = setupLayouts(routes)
const app = createApp(App)

// fromat date from md's frontmatter i.e. 22024-02-22 note: not with quote mark
app.config.globalProperties.$fromatDateFromMdMatter = (date) =>{
    let time = new Date(new Date(date).getTime())
    return time.toUTCString()
}

// app.use(createPinia())
app.use(createRouter({
    history: createWebHistory(),
    routes: layoutRoutes,
}))
console.log(routes)
app.mount('#app')
```

#### cdnèµ„æºå¼•å…¥

ç«™ç‚¹ä½¿ç”¨äº†[boot cdn](https://www.bootcdn.cn/) ç”¨æ¥å¼•å…¥bootstrap5ï¼Œanimate.css å’Œå…¶ä»–ä¸‰æ–¹jsåŠŸèƒ½åº“, åœ¨index.html å¤´éƒ¨å¼•å…¥ï¼š

```html
  <!-- use bootstrap -->
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.1/js/bootstrap.bundle.js"></script>
  <!-- <link href="https://cdn.bootcdn.net/ajax/libs/bootstrap-icons/1.11.0/font/bootstrap-icons.min.css" rel="stylesheet"> -->

  <!-- use animate.css  -->
  <link href="https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <!-- use date js -->
  <script src="https://cdn.bootcdn.net/ajax/libs/datejs/1.0/date.min.js"></script>

  <!-- github markdown css -->
  <link href="https://cdn.bootcdn.net/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css" rel="stylesheet">
  <!-- use prism theme vs css ä»£ç é«˜äº® -->
  <!-- <link href="https://cdn.bootcdn.net/ajax/libs/prism-themes/1.9.0/prism-vs.min.css" rel="stylesheet"> -->
  <!-- é»‘è‰²ä¸»é¢˜ ä»£ç é«˜äº® -->
  <link href="https://cdn.bootcdn.net/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css" rel="stylesheet">

```

### åŸºç¡€ç»„ä»¶

å‡†å¤‡ä¸€äº›ç½‘ç«™åŸºç¡€å¸ƒå±€ç»„ä»¶ï¼Œä¾‹å¦‚header, footer, backtotopç­‰

#### Headerç»„ä»¶

```js
<template>
  <!-- nav bar & menu -->
  <nav class="navbar navbar-expand-md bg-body-tertiary bg-opacity-10">
    <div class="container-sm">
      <a class="navbar-brand" href="/">aoaoms</a>
      <div class="collapse navbar-collapse me-3" id="navbarNav">
        <div class="d-flex justify-content-end w-100">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/blog">åšå®¢</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#">é¡¹ç›®</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#">ç•™è¨€</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="#">å…³äº</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="d-flex justify-content-end hstack gap-3">
        <!-- blog -->
        <a class="icon-link d-md-none" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-file-earmark-text" viewBox="0 0 16 16">
            <path
              d="M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5" />
            <path
              d="M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z" />
          </svg>
        </a>
        <!-- project -->
        <a class="icon-link d-md-none" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lightbulb"
            viewBox="0 0 16 16">
            <path
              d="M2 6a6 6 0 1 1 10.174 4.31c-.203.196-.359.4-.453.619l-.762 1.769A.5.5 0 0 1 10.5 13a.5.5 0 0 1 0 1 .5.5 0 0 1 0 1l-.224.447a1 1 0 0 1-.894.553H6.618a1 1 0 0 1-.894-.553L5.5 15a.5.5 0 0 1 0-1 .5.5 0 0 1 0-1 .5.5 0 0 1-.46-.302l-.761-1.77a2 2 0 0 0-.453-.618A5.98 5.98 0 0 1 2 6m6-5a5 5 0 0 0-3.479 8.592c.263.254.514.564.676.941L5.83 12h4.342l.632-1.467c.162-.377.413-.687.676-.941A5 5 0 0 0 8 1" />
          </svg>
        </a>
        <!-- message -->
        <a class="icon-link d-md-none" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat"
            viewBox="0 0 16 16">
            <path
              d="M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105" />
          </svg>
        </a>
        <!-- toggle dark or light -->
        <a class="icon-link" href="#">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
            class="bi bi-brightness-high" viewBox="0 0 16 16">
            <path
              d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708" />
          </svg>
        </a>
      </div>
    </div>
  </nav>
</template>

```

#### Footerç»„ä»¶

```js
<template>
    <div class="w-100 text-center py-3 mt-5" style="font-size: 13PX;">
        <p class="d-inline-block">
            <a role="button" class="" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-NC-SA 4.0 </a>
            2024-PRESENT Â© AOAOMS.COM
        </p>
    </div>
</template>
```

#### BackToTop ç»„ä»¶

```js
<script setup>
const isVisible = ref(false)

onMounted(() => {
    window.document.addEventListener("scroll", (e) =>{
        isVisible.value = window.scrollY >= 120
    })
})

const backToTop = () => {
    document.body.scrollTop = 0;
    document.documentElement.scrollTop = 0;
}
</script>

<template>
    <!-- Back to top button -->
    <button v-if="isVisible" type="button" class="btn btn-lg bbtt" id="btn-back-to-top" @click="backToTop">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up fs-2"
            viewBox="0 0 16 16">
            <path fill-rule="evenodd"
                d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z" />
        </svg>
    </button>
</template>

<style scoped>
/* æ»šåŠ¨åˆ°é¡¶éƒ¨ */
.bbtt {
    position: fixed;
    bottom: 40px;
    right: 30px;
}
</style>

```

#### è‡ªåˆ¶Md Toc

æµ…è–„äº†å“ˆï¼Œä»Šå¤©æœ‰ç‚¹å„¿æ—¶é—´æ•´æ•´è¿™ä¸ªè‡ªåŠ¨toc, ç›´æ¥åœ¨tocç»„ä»¶é‡Œé¢æ³¨å†ŒonMounted è·å–md æ–‡æ¡£çš„hæ ‡ç­¾å’Œaæ ‡ç­¾çš„æ•°æ®ï¼Œæ•´ç†æˆç›®å½•åˆ—è¡¨ã€‚ç®€å•å®ç”¨ï¼Œå¯èƒ½æ²¡é‚£ä¹ˆä¼˜é›…~

è·å–æ–‡æ¡£hæ ‡ç­¾å’Œlinkä¿¡æ¯

```js
for (const h of window.document.getElementById("app").querySelectorAll('h3, h4')) {
    toc.push({
        parentId: h.tagName === 'H3'? 0 : 1,
        textContent: h.textContent.replaceAll('# ','')
    })
}
```

ç”Ÿæˆç›®å½•

```html
<ul class="markdown-body nav d-flex flex-column animate__animated"  :class="animateClass"
                style="font-size: 13px;">
    <li class="nav-item" v-for="item in toc" :key="item">                
        <a v-if="item.parentId == 0" class="cursor-hover py-1 ps-0" :href="'#' + item.textContent.replaceAll(' ','-')">{{ item.textContent }}</a>
        <a v-else class="cursor-hover py-1 ps-0 ms-4 " :href="'#' + item.textContent.replaceAll(' ','-')">
            {{ item.textContent }}              
        </a>
    </li>
</ul>
```

ä¸ºä½•å•ç‹¬å†™ä¸€ä¸ªtocç»„ä»¶ï¼Ÿ ä¸ºäº†åæœŸä¸°å¯Œç»„ä»¶å†…å®¹ã€‚
ç»´æŠ¤ä»…è·å–h3 h4æ ‡ç­¾ï¼Ÿ æˆ‘å°±ç”¨äº†è¿™H1,H3å’ŒH4ã€‚H1ä¸å¤„ç†ã€‚H1 åé¢å¯ä»¥åšSEO
è‡ªåˆ¶toc ä»…å¤„ç†åˆ°2çº§ç›®å½•ï¼Œæ›´å¤šçº§æ²¡å¿…è¦ ä¹Ÿä¸ç¾è§‚ï¼å®é™…æ•ˆæœç±»ä¼¼anthonyFu çš„ï¼Œç»†è‡´å¤„éœ€è¦ç²¾é›•~ ğŸ˜„

::: demo å®Œæ•´çš„Toc ç»„ä»¶

```js
<script setup>
const toc = reactive([])

const showPageNav = ref(true)
const animateClass = ref('animate__fadeIn')
const leavePageNav = () => {
    if (showPageNav.value) {
        animateClass.value = 'animate__fadeOut'
        setTimeout(() => {
            showPageNav.value = false
        }, 1500);
    }
}

const enterPageNav = () => {
    if (!showPageNav.value) {
        animateClass.value = 'animate__fadeIn'
        setTimeout(() => {
            showPageNav.value = true
        }, 300);
    }
}
// å…¬å¼€æ–¹æ³•ç”¨äºæ–‡æ¡£ç»„ä»¶è°ƒç”¨ é¼ æ ‡ç§»å…¥ç§»å‡ºæ˜¾ç¤ºæˆ–éšè—toc
defineExpose({
    leavePageNav, enterPageNav
})

onMounted(() => {
    for (const h of window.document.getElementById("app").querySelectorAll('h3, h4')) {
        toc.push({
            parentId: h.tagName === 'H3'? 0 : 1,
            textContent: h.textContent.replaceAll('# ','')
        })
    }
})
</script>

<template>
    <!-- nav bar & menu -->
    <div class="mt-2 d-none d-md-block position-fixed" v-if="toc">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-list"
                viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
            </svg>
        </div>
        <div v-if="showPageNav" class="mt-2 overflow-auto" style="height: 70vh;width: 20vw;">
            <ul class="markdown-body nav d-flex flex-column animate__animated"  :class="animateClass"
                style="font-size: 13px;">
                <li class="nav-item" v-for="item in toc" :key="item">                
                    <a v-if="item.parentId == 0" class="cursor-hover py-1 ps-0" :href="'#' + item.textContent.replaceAll(' ','-')">{{ item.textContent }}</a>
                    <a v-else class="cursor-hover py-1 ps-0 ms-4 " :href="'#' + item.textContent.replaceAll(' ','-')">
                        {{ item.textContent }}              
                    </a>
                </li>
            </ul>
        </div>    
    </div>
</template>
```

:::

### è‡ªåŠ¨å¤„ç†æ–‡ç« è·¯ç”±

&emsp;&emsp;å¦‚ä½•åªå…³æ³¨å†™mdæ–‡ç« ï¼Œç„¶åæ„å»ºå³å¯å‘å¸ƒå‘¢ï¼Ÿ èšç„¦åˆ°æœ¬ç«™çš„blogè·¯ç”±ï¼Œä½¿ç”¨äº†ä¸€ä¸ªTabs ç”¨äºå±•ç¤ºä¸åŒtabä¸‹çš„æ–‡ç« åˆ—è¡¨ã€‚æ¯ç¯‡æ–‡ç« æœ‰å›ºå®šè·¯ç”±å¯¼èˆªåˆ°æ–°çª—å£å±•ç¤ºå†…å®¹ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æ”¶é›†è¿™äº›è·¯ç”±ä¿¡æ¯ç”¨äºtabså†…å‘¢ã€‚ç­”æ¡ˆå°±æ˜¯ä½¿ç”¨ [vite-plugin-pages](https://github.com/hannoeru/vite-plugin-pages) æ’ä»¶æä¾›çš„æ‰©å±•æ–¹æ³•ã€‚

#### vite plugin pages

#### extendRoute

    Type: (route: any, parent: any | undefined) => any | void
A function that takes a route and optionally returns a modified route. This is useful for augmenting your routes with extra data (e.g. route metadata).

è¿™ä¸ªæ–¹æ³•æä¾›äº†å¯ä¿®æ”¹æˆ–æ·»åŠ è·¯ç”±å…ƒæ•°æ®çš„èƒ½åŠ›. æ–¹æ³•æœ¬èº«ä¸æ”¯æŒå¼‚æ­¥æ“ä½œasync. å¦‚æœéœ€è¦å¼‚æ­¥å¤„ç†æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªæ”¯æŒå¼‚æ­¥çš„æ–¹æ³•ï¼š

#### onRoutesGenerated

    Type: (clientCode: string) => Awaitable<string | void>
A function that takes a generated client code and optionally returns a modified generated client code.

#### é¡¹ç›®å†…çš„å¤„ç†

  1.æ¯æ–‡ç« è·¯ç”±endpint è·å–æ¯mdæ–‡ç« çš„frontmatter dataæ•°æ®å­˜å…¥route metaå†…
  reference: [ç”¨ Vite æ„å»ºé™æ€ç½‘ç«™](https://zhuanlan.zhihu.com/p/377593594)

```js
extendRoute(route) {
  const path = resolve(__dirname, route.component.slice(1))
  const md = fs.readFileSync(path, "utf-8")
  const { data } = matter(md)
  route.meta = Object.assign(route.meta || {}, { frontmatter: data })

  return route
}
```

2. æ±‡é›†æ‰€æœ‰tab æ–‡ä»¶å¤¹å†…çš„mdæ–‡ç« è·¯ç”±ä¿¡æ¯åˆ°blogè·¯ç”±å†…

```js
onRoutesGenerated(routes) {     
  let rBlog = routes.find(r => r.name === 'blog' )
  // unincludes 'blog' route and 'all' route and 'index' route
  let tabs = {}
  // limit which folder can be process
  let tabsFolder = ['posts','ai','webfront','net']
  for (const route of routes.filter(r => r.name !== 'blog' && r.name !== 'all' && r.name !== 'index')) {
    // build blog's tabs data
    let tab = route.name.slice(0, route.name.indexOf('-'))
    if (!tabs.hasOwnProperty(tab) && tabsFolder.includes(tab))
      tabs[tab] = []
    tabs[tab].push({
      ...route
    })
  }
  rBlog.meta = Object.assign(rBlog.meta || {}, { tabs: tabs })
},
```

3. åœ¨blogè·¯ç”±ç»„ä»¶å†…ä½¿ç”¨tabså±•ç¤ºæ•°æ®å¹¶æä¾›å¯¼èˆª

```js
// in setup
const tabs = reactive(useRoute().meta.tabs)

// lite code
<KeepAlive>
    <TabsList :list="tabs[activeTab]" :path="activeTab" :key="activeTab"/>
</KeepAlive>

```

### æ„å»ºé¡¹ç›®

```js
npm run build
```

### éƒ¨ç½²

æ„å»ºçš„vueåº”ç”¨å¯ä»¥éƒ¨ç½²åˆ°Netlify, Vercel, Cloudflate, Azure ç­‰é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ç«¯ã€‚å…·ä½“å‚è€ƒvite å®˜ç½‘ä»‹ç» [éƒ¨ç½²é™æ€ç½‘ç«™](https://cn.vitejs.dev/guide/static-deploy.html) ã€‚è¿™é‡Œä»…è¯´æ˜ç¬”è€…éƒ¨ç½²åˆ°è‡ªæœ‰EcsæœåŠ¡å™¨çš„Nginx æœåŠ¡çš„æ³¨æ„è¦ç‚¹ï¼

    ç”±äºæ„å»ºäº†vueåº”ç”¨ï¼Œéœ€è¦è®¾ç½®404é¡µé¢æŒ‡å‘ index.html
